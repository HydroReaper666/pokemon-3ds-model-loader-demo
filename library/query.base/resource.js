$(function(){var e=global.$;e.request=function(){var t=null;t=e.format&&e.format.resolve&&arguments.length>2?e.format.resolve([["path","callback"],["path","options","callback"],["method","path","data","callback"],["method","path","data","options","callback"]],{path:"string",callback:{acceptTypes:"function",defaultValue:function(){}},method:{acceptTypes:"string",defaultValue:"GET"},data:"any",options:{acceptTypes:"object",defaultValue:{},mergeOptions:{timeout:{"!valueType":"number","!defaultValue":3e4},async:{"!valueType":"boolean","!defaultValue":!0},headers:{"!valueType":"object","!defaultValue":{}},responseDataType:{"!valueType":"string","!defaultValue":"*"},requestDataType:{"!valueType":"string","!defaultValue":"*"}}}},arguments):{path:arguments[0],method:"GET",options:{async:!0,headers:{},responseDataType:"*",requestDataType:"*"},callback:arguments[1]};var a=null;a=window.XDomainRequest?new XDomainRequest:window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),/^[0-9a-z\-]+:/i.test(t.path)||("/"!==t.path[0]?t.path=require.root+"/"+t.path:t.path=require.root+t.path),a.open(t.method,t.path,t.options.async),a.timeout=t.options.timeout;var s=Date.now();Object.keys(t.options.headers).forEach(function(s){e.is.nil(t.options.headers[s])||a.setRequestHeader(s,t.options.headers[s])}),["binary","text","*"].indexOf(t.options.responseDataType)?e.parse&&e.parse.parsers&&e.parse.parsers[t.options.responseDataType]&&e.parse.parsers[t.options.responseDataType].needBinaryData?a.responseType="arraybuffer":a.responseType="text":"binary"===t.options.responseDataType?a.responseType="arraybuffer":a.responseType="text";var n=!1,r=function(r){if(!n&&4===a.readyState)switch(n=!0,Math.floor(a.status/100)){case 0:case 2:if(0!==a.status||a.responseURL){var l=t.options.responseDataType;"*"===l&&(l="<"===a.response[0]?"xml":-1!==["[","{"].indexOf(a.response[0])?"json":"text"),-1!==["binary","text","xml"].indexOf(l)?t.callback(null,a.response,a,l):"json"===l?a.response?e.parse?t.callback(null,e.parse(l,a.response)[0],a,l):t.callback(null,JSON.parse(a.response),a,l):t.callback(null,null,a,l):t.callback(new Error("No parser found for : "+l),null,a)}else if(Date.now()-s<a.timeout)t.callback(new Error("Connection refused"),null,a);else{var o=new Error("Request timeout");o.causedByTimeout=!0,t.callback(o,null,a)}break;case 1:case 3:case 4:case 5:default:t.callback(new Error("Server response status code "+a.status),null,a)}};if(a.addEventListener)a.addEventListener("readystatechange",r);else if(window.XDomainRequest){var l=!1;a.onload=function(e){l||(l=!0,a.readyState=4,a.status=200,a.response=a.responseText,r())},a.onerror=function(e){l||(l=!0,t.callback(new Error("Server error"),null,a))},a.ontimeout=function(e){l||(l=!0,t.callback(new Error("Server timeout"),null,a))}}else a.onreadystatechange=r;if(!(null===t.data||void 0===t.data||"string"==typeof t.data||t.data instanceof String||window.ArrayBuffer&&t.data instanceof ArrayBuffer)){var o=t.options.requestDataType;"*"===o&&(o=t.data instanceof Node?"xml":"json"),e.serialize?t.data=e.serialize(o,t.data).first():"json"===o&&(t.data=JSON.stringify(t.data))}return a.send(t.data),a},e.resources={};var t={patches:[],deleteds:[],packages:{},files:{},entries:{},urls:{},loadings:{}},a={};var s=[];e.resources.load=function(n,r){n instanceof Array||(n=[n]);var l={};const o=n.map(s=>{let n=0,r=null;return r=(o=>{var i=null;"string"==typeof s||s instanceof String?i=s:(i=s.path,s.type);var c=i;if(!/^[0-9a-z\-]+:/i.test(i)){let e=document.URL.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/");"/"!==e[e.length-1]&&(e+="/"),i="/"===i[0]?e+i.slice(1):e+i}if(i=i.replace(/\/\.\//g,"/").replace(/\/[^\/]+\/\.\.\//g,"/"),t.files.hasOwnProperty(i)&&t.urls.hasOwnProperty(t.files[i])){let a=t.urls[t.files[i]].replace(/\$\{id\}/g,t.files[i]);return delete t.urls[t.files[i]],t.loadings[t.files[i]]=[],void e.resources.loadPackage(a,function(e){r(o);let a=t.loadings[t.files[i]];delete t.loadings[t.files[i]],a.forEach(e=>e())})}if(t.files.hasOwnProperty(i)&&t.loadings.hasOwnProperty(t.files[i]))t.loadings[t.files[i]].push(()=>{r(o)});else if(a.hasOwnProperty(i)){var p=a[i],u=p.content.data;"base64"===p.content.encoding?u=window.atob(u):-1===["json","text","processed"].indexOf(p.content.encoding)&&(u=e.parse(p.content.encoding,u)[0]),l[c]={content:u},o()}else e.request(i,function(e,t,s){e?n<3?(++n,s(o)):(l[c]={error:e},o(e)):(a[i]={content:{data:t,encoding:"processed"}},l[c]={content:t},o())})})}),i=[],c=[],p=()=>{if(0===i.length&&0===o.length)r(c[0],l);else if(o.length>0)if(s.length>=3&&0===s.length)e.delay(50,p);else for(;s.length<3&&o.length>0;)(()=>{let e=o.shift();i.push(e),s.push(e),e(t=>{t&&c.push(t);let a=s.indexOf(e);-1!==a&&s.splice(a,1),-1!==(a=i.indexOf(e))&&i.splice(a,1),p()})})()};p()},e.resources.hasCache=function(e){if(!/^[0-9a-z\-]+:/i.test(e)){let t=document.URL.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/");"/"!==t[t.length-1]&&(t+="/"),e="/"===e[0]?t+e.slice(1):t+e}return e=e.replace(/\/\.\//g,"/").replace(/\/[^\/]+\/\.\.\//g,"/"),a.hasOwnProperty(e)},e.resources.loadBundles=function(a,s){e.request(a,function(e,a){if(e)s(e);else{let e=document.URL.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/");"/"!==e[e.length-1]&&(e+="/");var n=t=>"/"===t[0]?e+t.slice(1):e+t;a.deleteds.forEach(e=>{e=n(e),-1===t.deleteds.indexOf(e)&&t.deleteds.push(e),delete t.files[e]}),a.patches.forEach(e=>{e=n(e),-1===t.patches.indexOf(e)&&t.patches.push(e),delete t.files[e]}),Object.keys(a.packages).forEach(e=>{t.packages.hasOwnProperty(e)?console.warn("Duplicated package "+e):t.urls[e]=a.url;let s=a.packages[e].map(n);t.packages[e]=s,s.forEach(a=>{-1===t.deleteds.indexOf(a)&&-1===t.patches.indexOf(a)&&(t.files[a]=e)})}),a.files.forEach(e=>{t.entries[e]=!0}),s()}})};const n={};e.resources.loadPackage=function(s,r){n.hasOwnProperty(s)?r():(n[s]=!0,e.request(s,function(e,s){e?r(e):(Object.keys(s).forEach(function(e){var n=null;/^[0-9a-z\-]+:/i.test(e)&&(n=e),"/"!==(n=document.URL.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/"))[n.length-1]&&(n+="/"),n=(n+=e).replace(/\/\.\//g,"/").replace(/\/[^\/]+\/\.\.\//g,"/"),-1===t.deleteds.indexOf(n)&&-1===t.patches.indexOf(n)&&(a[n]=s[e])}),r())}))},e.resources.listFiles=function(e){return Object.keys(t.entries).filter(e)}});