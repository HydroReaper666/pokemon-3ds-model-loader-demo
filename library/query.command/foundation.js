$(function(){var e=function(e,n){n||(n={bubbles:!1,cancelable:!1,detail:void 0});var t=null;return document.createEvent?(t=document.createEvent("CustomEvent")).initCustomEvent(e,n.bubbles,n.cancelable,n.detail):(t=document.createEventObject(window.event)).type=e,t};window.Event&&(e.prototype=window.Event.prototype);var n={},t=function(e){if(n[e.type]){var t=$.dom.filterSelectors(e.target,Object.keys(n[e.type]));t.length>0?n[e.type][t[0]].forEach(function(n){n(e,e.parameters[0])}):document.body.contains(e.target)&&$.command.warnForReceiverMissing&&$.warn("Unknown command received "+e.type,JSON.stringify(e.parameters))}else document.body.contains(e.target)&&$.command.warnForReceiverMissing&&$.warn("Unknown command received "+e.type,JSON.stringify(e.parameters))},r={};$.dom.upgradeEventListener("*",function(e,n,o,a){var c=e.split(".").slice(-1)[0];return-1===c.indexOf(":")||r.hasOwnProperty(c)||(r[c]=function(e){t(e)},$(document.body).on(c,r[c])),o}),$.command={dispatch:function(){var n=null,o=null,a=null,c=null;$.is(arguments[0],Node)?(n=arguments[0],o=arguments[1],a=arguments[2],c=arguments[3]):(n=document.body,o=arguments[0],a=arguments[1],c=arguments[2]),$.is.nil(a)?a=[]:$.is(a,Array)||(a=[a]);var i=new e(o,{bubbles:!c,cancelable:!0});return i.command=o,i.parameters=a,r.hasOwnProperty(o)||(r[o]=function(e){t(e)},$(document.body).on(o,r[o])),$(n).fire(i),i},register:function(e,t,r){n.hasOwnProperty(t)||(n[t]={}),n[t].hasOwnProperty(e)||(n[t][e]=[]),n[t][e].push(r)}}});