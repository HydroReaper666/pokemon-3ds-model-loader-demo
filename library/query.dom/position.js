$(function(){"use strict";var t=function(t,e,n){this.x=t,this.y=e,this.z=n},e=document.createElement("div"),n={none:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r=function t(r){if($.is(r,t))return r;var o=null;if(r||(r="none"),"string"==typeof r)if(n.hasOwnProperty(r))o=n[r];else{o=[];var i=r;/^matrix(3d)?\([0-9,\.\-\s]+\)$/.test(r)||(n[r]=o,document.body.appendChild(e),e.style.transform=r,(i=window.getComputedStyle(e).transform)&&"none"!==i||(i="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"),document.body.removeChild(e)),n[i]=o;var a=i.match(/matrix3?d?\(([^\)]+)\)/i)[1].split(",");6===a.length&&(a=[a[0],a[1],0,0,a[2],a[3],0,0,0,0,1,0,a[4],a[5],0,1]);for(var s=-1;++s<4;)for(var f=-1;++f<4;)o[4*s+f]=parseFloat((a[4*f+s]+"").trim())}else o=r;this.data=o.slice(0)};r.prototype={toString:function(){return"matrix3d("+this.transpose().data.join(",")+")"},transpose:function(){for(var t=[],e=-1;++e<4;)for(var n=-1;++n<4;)t[4*e+n]=this.data[4*n+e];return new r(t)},decompose:function(){throw new Error("Not implemented")},multiply:function(t){for(var e=[],n=-1;++n<4;)for(var o=-1;++o<4;){for(var i=0,a=-1;++a<4;)i+=this.data[4*n+a]*t.data[4*a+o];e[4*n+o]=i}return new r(e)},translate:function(t,e,n){return this.multiply(new r([1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1]))},inverse:function(){var t=this.data[0],e=this.data[1],n=this.data[2],o=this.data[4],i=this.data[5],a=this.data[6],s=this.data[8],f=this.data[9],u=this.data[10],l=i*u-a*f,d=a*s-o*u,p=o*f-i*s,c=t*l+e*d+n*p,h=new r([l/c,(n*f-e*u)/c,(e*a-n*i)/c,0,d/c,(t*u-n*s)/c,(n*o-t*a)/c,0,p/c,(e*s-t*f)/c,(t*i-e*o)/c,0,0,0,0,1]),m=new r([1,0,0,-this.data[3],0,1,0,-this.data[7],0,0,1,-this.data[11],0,0,0,1]);return h.multiply(m)},transformPoint:function(e){var n=this.data;return new t(n[0]*e.x+n[1]*e.y+n[2]*e.z+n[3],n[4]*e.x+n[5]*e.y+n[6]*e.z+n[7],n[8]*e.x+n[9]*e.y+n[10]*e.z+n[11])}};var o=function(e){for(var n=new r("matrix(1, 0, 0, 1, 0, 0)"),o=n,i=e;i&&i.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&i.nodeType!==Node.DOCUMENT_NODE;){var a=window.getComputedStyle(i,null);a&&a.transform&&(o=new r(a.transform.replace(/^none$/,"matrix(1, 0, 0, 1, 0, 0)")).multiply(o)),i=i.parentNode}for(var i=4,s=1/0,f=1/0;--i>=0;){var u=o.transformPoint(new t(0===i||1===i?0:e.offsetWidth,0===i||3===i?0:e.offsetHeight,0));u.x<s&&(s=u.x),u.y<f&&(f=u.y)}var l=e.getBoundingClientRect();return o=n.translate(window.pageXOffset+l.left-s,window.pageYOffset+l.top-f,0).multiply(o)};$.dom.CSSMatrix=r,$.upgrade({domain:"dom",addons:{offset:function(){return this.offsets().filter(function(t){return!$.is.nil(t)}).first()},offsets:function(){return this.map(function(t){var e=(t=$(t)).positionToPage({x:0,y:0},!0);if(e){for(var n=t.parent();n.length>0&&-1===["relative","absolute"].indexOf(n.style("position"));)n=n.parent();var r=e;return n.isEmpty()||(r=n.positionFromPage(e)),r}return null})},size:function(){return this.sizes().first()},sizes:function(){return this.map(function(t){let e=t.getClientRects()[0];return{width:e?e.width:0,height:e?e.height:0}})},scrollInfo:function(){return this.scrollInfos().first()},scrollInfos:function(){return this.map(function(t){return{left:t.scrollLeft,top:t.scrollTop,width:t.scrollWidth,height:t.scrollHeight}})},positionToPage:function(t,e){return this.positionsToPage(t,e).filter(function(t){return!$.is.nil(t)}).first()},positionsToPage:function(e,n){return this.map(function(r){var i=r;if(r.nodeType!==Node.ELEMENT_NODE){i=r.parentNode;var a=document.createRange();a.selectNodeContents(r);var s=a.getClientRects()[0];if(!s)return null;var f=$(i).positionFromPage({x:s.left,y:s.top},n);e={x:e.x+f.x,y:e.y+f.y}}if(!n){var u=window.getComputedStyle(i,null);e={x:e.x+parseFloat(u.borderLeftWidth),y:e.y+parseFloat(u.borderTopWidth)}}var l=o(i).transformPoint(new t(e.x,e.y,0));return{x:l.x,y:l.y}})},positionFromPage:function(t,e){return this.positionsFromPage(t,e).filter(function(t){return!$.is.nil(t)}).first()},positionsFromPage:function(e,n){return this.map(function(r){var i=r,a={x:0,y:0};if(r.nodeType!==Node.ELEMENT_NODE){i=r.parentNode;var s=document.createRange();s.selectNodeContents(r);var f=s.getClientRects()[0];if(!f)return null;a=$(i).positionFromPage({x:f.left,y:f.top},n)}var u=o(i).inverse().transformPoint(new t(e.x,e.y,0));if(u={x:u.x+a.x,y:u.y+a.y},!n){var l=window.getComputedStyle(i,null);u={x:u.x-parseFloat(l.borderLeftWidth),y:u.y-parseFloat(l.borderTopWidth)}}return u})}}})});