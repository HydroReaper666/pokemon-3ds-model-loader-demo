$(function(){$.dom.smartList=function(t){let e=$("<ul>");return t.filter||(t.filter=(t=>$.async.resolve(!0))),t.idGetter||(t.idGetter=(t=>t)),t.comparator||(t.comparator=((t,e)=>0)),e.resetItems=function(i){return $.async.all(e.children(".list-item.list-item-ready"),function(e){t.animator.delete($(e).removeFeatures("list-item-ready"),!1).pipe(this)}).then(function(){i?e.updateItems(i):this.next()})},e.updateItem=function(i,r){return $.async(function(){t.filter(i,!1).catch(this)}).then(function(n,s){let l=t.idGetter(i),a=e.children(".list-item.list-item-ready"),m=e.children(".list-item.list-item-ready.list-item-id-"+l.toString());if(n||!s)m.isEmpty()?this.next():(m.removeFeatures("list-item-ready"),t.animator.delete(m,r).pipe(this));else{let n=-1,s=a.length+1;for(;s-n>1&&0!==s;){let e=s+n>>1;e<a.length?t.comparator(a[e].listItem,i)<=0?n=e:s=e:n=e}if(n>0&&t.idGetter(a[n-1].listItem)===l&&--n,m.isEmpty())m=t.dom(i,r).addFeatures("list-item","list-item-ready","list-item-id-"+l.toString()).property({listItem:i,version:1}),-1===n?e.prepend(m):n===a.length?e.append(m):e.insert(m,$(a[n]).next()),t.animator.insert(m,r).pipe(this);else if(n>=0&&n<a.length&&t.idGetter(a[n].listItem)===l)t.animator.update(m.property("listItem",i),r).pipe(this);else{let s=$(m.first().cloneNode(!0)).removeFeatures("list-item-ready");m.parent().insert(s,m),t.animator.delete(s,r).rejected(function(t){$.error(t)}),-1===n?e.prepend(m):n===a.length?e.append(m):e.insert(m,$(a[n]).next()),t.animator.insert(m.property("listItem",i),r).pipe(this)}}}).then(function(){if(t.listener)try{t.listener()}catch(t){$.error(t)}this.next()})},e.updateItems=function(t){return $.async.all(t,function(t){e.updateItem(t).pipe(this)})},e.updateFilter=function(i,r){return i&&(t.filter=i),$.async.all(e.children(".list-item.list-item-ready"),function(e){$.async(function(){t.filter(e.listItem,!0).catch(this)}).then(function(i,r){i||!r?t.animator.delete($(e).removeFeatures("list-item-ready"),!1).pipe(this):this.next()}).pipe(this)}).all(r||[],function(t){e.updateItem(t).pipe(this)})},e.updateComparator=function(i,r){return i||(t.comparator=i),$.async.all(e.children(".list-item.list-item-ready"),function(e){t.animator.delete($(e).removeFeatures("list-item-ready"),!1).pipe(this)}).all(r||[],function(t){e.updateItem(t).pipe(this)})},Object.defineProperty(e,"items",{get:function(){return e.children(".list-item.list-item-ready").map(t=>t.listItem)}}),e}});